# استفاده از ایمیج رسمی پاپتیر (شامل نود جی‌اس + کروم نصب شده)
FROM ghcr.io/puppeteer/puppeteer:21.5.2

# تنظیم دایرکتوری کاری
WORKDIR /usr/src/app

# کپی کردن فایل‌های پکیج
COPY package*.json ./

# نصب پکیج‌ها (با نادیده گرفتن اسکریپت‌های کروم چون خود ایمیج کروم دارد)
RUN npm ci

# کپی کردن کل سورس کد به داخل کانتینر
COPY . .

# یوزر root برای دسترسی به فایل‌ها (اختیاری ولی برای جلوگیری از پرمیشن ارور خوبه)
USER root